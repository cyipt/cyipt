---
title: 'Modelling the uptake of active travel'
subtitle: "from infrastructure to behaviour change"
author: "Robin Lovelace & Malcolm Morgan"
date: "`r Sys.Date()`. Slides: [rpubs.com/RobinLovelace](http://rpubs.com/RobinLovelace/258956)."
output:
  ioslides_presentation:
    transition: slower
widescreen: true
logo: ../figures/its-logo-square.png
bibliography: /home/robin/allrefs.bib
---

<!-- Plan: 15 minute presentation building on pct work and mlCars stuff -->

## Outline

- Context 
- Scenarios of active travel uptake 
- How many cyclists does a new cycle path create?
- Scenarios of infrastructure change 
- Discussion

# Introduction

## How to transition to active cities?

- Brief outline of scientific arguments

## How to get from here to there?

- Images of UK vs Dutch cities

## The Propensity to Cycle Tool - see [w](http://npct0.vs.mythic-beasts.com/shiny_interface/?r=west-yorkshire)[ww.pct.bike](www.pct.bike)

```{r, echo=FALSE, fig.cap="The front page of the open source, open access Propensity to Cycle Tool (PCT).", out.width="100%"}
knitr::include_graphics("~/npct/pct/figures/pct-frontpage.png")
```

## Context: from concept to implementation

<!-- Not a rabbit out of a hat! -->
> - 3 years in the making
> - Origins go back further

```
Concept (PhD) -> Job at UoL (2009 - 2013)
 Discovery of R programming and shiny (2013)
  'Propensity to Cycle' bid by DfT via SDG (2014)
    Link-up with Cambridge University and colleagues (2015)
     Implementation on national OD dataset, 700k routes (2016)
      Completed LSOA phase (4 million lines!) (2017)
```

 > - 2018: (Global PCT?) 
 
## The academic landscape [see @lovelace_propensity_2017]


```{r, echo=FALSE, out.width="70%"}
knitr::include_graphics("../figures/jtlu-paper-front-page.png")
```

 
## Prior work (source: Lovelace et al. 2017)

```{r, echo=FALSE, message=FALSE}
dft = readr::read_csv("~/npct/pct/data-sources/cycle-tools-wide.csv")
dft$Tool = gsub("Permeability Assessment Tool", "PAT", dft$Tool)
knitr::kable(dft[-5, ])
```

## The PCT team | "If you want to go far, go as a team"

Robin Lovelace (Lead Developer, University of Leeds)

- James Woodcock (Principal Investigator, Cambridge University)
- Anna Goodman (Lead Data Analyst, LSHTM)
- Rachel Aldred (Lead Policy and Practice, Westminster University)
- Ali Abbas (User Interface, University of Cambridge)
- Alvaro Ullrich (Data Management, University of Cambridge)
- Nikolai Berkoff (System Architecture, Independent Developer)
- Malcolm Morgan (GIS and infrastructure expert, UoL)
 
## Policy feedback

"The PCT is a brilliant example of using Big Data to better plan infrastructure investment. It will allow us to have more confidence that new schemes are built in places and along travel corridors where there is high latent demand."

- Shane Snow: Head of Seamless Travel Team, Sustainable and Acessible Travel Division

"The PCT shows the country’s great potential to get on their bikes, highlights the areas of highest possible growth and will be a useful innovation for local authorities to get the greatest bang for their buck from cycling investments  and realise cycling potential."

- Andrew Jones, Parliamentary Under Secretary of State for Transport

## The PCT in CWIS and LCWIP

Included in Cycling and Walking Infrastructure Strategy (CWIS) and the Local Cycling and Walking Infrastructure Plan (LCWIP)

```{r, echo=FALSE}
knitr::include_graphics("~/npct/pct/figures/front-page-leeds-pct-demo.png")
```

# Scenarios of behaviour change

## How the PCT works

Shows on the map where there is high cycling potential,
for 4 scenarios of change

- Government Target
- Gender Equality
- Go Dutch
- Ebikes

## Scenario shift in desire lines | Source: @lovelace_propensity_2017

```{r, echo=FALSE}
knitr::include_graphics("~/npct/pct/flow-model/od-data-leeds.png")
```

- Origin-destination data shows 'desire lines'
- How will these shift with cycling uptake


## A model of cycling uptake

```{r, echo=FALSE}
knitr::include_graphics("~/npct/pct/flow-model/dd-anna.jpg")
```

- Hilliness and distance are (relatively) unchanging over time
- Model based on polynomial logit model of both:

$$
logit(pcycle) = \alpha + \beta_1 d + \beta_2 d^{0.5} + \beta_3 d^2 + \gamma h + \delta_1 d h + \delta_2 d^{0.5} h
$$


## Scenario shift in network load

```{r, echo=FALSE}
knitr::include_graphics("~/npct/pct/flow-model/leeds-rnet-gov-go.png")
```

## A live demo for Newcastle | "Actions speak louder than words"

- Test version of [p](http://npct0.vs.mythic-beasts.com/m/?r=west-yorkshire)[ct.bike](http://pct.bike/)

```{r, echo=FALSE, out.width="100%"}
knitr::include_graphics("~/npct/pct/flow-model/man-trinity-way-satellite.png")
```

# How many cyclists result from a new cycle path?



## How to model future scenarios of infrastructure change?

- Over to Malcolm

## stplanr

**stplanr** lives here: https://github.com/ropensci/stplanr

Package can be installed from CRAN or GitHub (see the package's
[README](https://github.com/Robinlovelace/stplanr) for details),
it can be loaded in with `library()`:

```{r, eval=FALSE}
install.packages("stplanr") # stable CRAN version
# devtools::install_github("ropensci/stplanr") # dev version
```


## Abstract I

This talk will provide an overview of the work that Robin Lovelace and Malcolm Morgan (ITS) have been doing as part of their Department for Transport funded projects on the Propensity to Cycle Tool (PCT, which has become part of UK government policy in the [Cycling and Walking Infrastructure Strategy](https://www.gov.uk/government/publications/cycling-and-walking-investment-strategy)) and follow-on work on the Cycling Infrastructure Prioritisation Toolkit (CyIPT).
Although strong evidence shows that infrastructure usually precedes (and to some extent causes) behaviour change the starting point of the talk will be behaviour: how do people currently get around and how could it be different, based on the fundamentals of route distance and hilliness.
Robin will demonstrate the PCT in action, talk about the R package **stplanr** that he developed to develop it, and outline plans for a globally scalable transport planning toolkit that builds on the PCT work.

## Abstract II

Following this high-level overview Malcolm will zoom into the detail: How the CyIPT identifies the best places for infrastructure change and what that infrastructure should be. He will also talk about the advanced programming techniques needed to process such complex geospatial network data at city to national levels. 

There is a clear linkage between the behaviour and infrastructure focci of Robin and Malcolm's talks that will become aparent as the seminar progresses.

Links to check before the talk:

- The PCT in action: http://www.pct.bike/
- A prototype of the CyIPT: http://cyipt.bike/
- A paper on the PCT (Lovelace et al 2017): https://www.jtlu.org/index.php/jtlu/article/view/862
- An article explaining **stplanr** (for people interested in the tech): https://cran.r-project.org/web/packages/stplanr/vignettes/introducing-stplanr.html
